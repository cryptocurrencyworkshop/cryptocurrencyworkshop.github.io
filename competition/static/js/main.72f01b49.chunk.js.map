{"version":3,"sources":["components/index.js","infura.png","../../contracts/src/abis.js","../../contracts/src/addresses.js","App.js","index.js"],"names":["Body","styled","div","StyledTable","table","Container","button","Image","header","img","a","attrs","target","rel","abis","erc20","ownable","competition","addresses","ceaErc20","App","useCall","contract","Contract","method","args","isEnabled","error","value","console","log","participants","getAddresses","i","length","j","push","preparePointsMultiCall","pepareJailMultiCall","pepareNamelMultiCall","pointsMultiCall","useCalls","jailMultiCall","nameMultiCall","collectPoints","inJail","names","data","toString","address","points","jail","name","htmlEnabled","href","map","val","key","src","logo","alt","config","readOnlyChainId","Ropsten","chainId","readOnlyUrls","getDefaultProvider","pollingInterval","ReactDOM","render","StrictMode","DAppProvider","document","getElementById"],"mappings":"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","file":"static/js/main.72f01b49.chunk.js","sourcesContent":["import styled from \"styled-components\";\n\nexport const Body = styled.div`\n  align-items: center;\n  color: white;\n  display: flex;\n  flex-direction: column;\n  font-family: \"Liberation Mono\", \"Courier New\", monospace;\n  font-size: calc(5px + 2vmin);\n  justify-content: center;\n  margin-top: 40px;\n`;\n\nexport const StyledTable = styled.table`\n  caption-side: top;\n  border-collapse: separate;\n  border-spacing: 5px 10px;\n\n  caption-side: bottom;\n  /* empty-cell: show | hide;  */\n  /* empty-cell is a property of table or the cells themselves */\n\n  /* vertical-align: baseline | sub | super | text-top | \n                text-bottom | middle | top | bottom | \n                <percentage> | <length> */\n\n  /* tbody {\n    vertical-align: top;\n  }              */\n  td,\n  /* td,\n  th {\n    border: 1px solid;\n  } */\n\n  td {\n    padding: 5px 30px;\n  }\n\n  tbody tr {\n    :nth-of-type(odd) {\n      // background-color: lightpink;\n    }\n    :hover {\n      background-color: lightpink;\n    }\n  }\n  // thead > tr {\n  //   background-color: #c2c2c2;\n  // }\n  caption {\n    font-size: 0.9em;\n    padding: 5px;\n    font-weight: bold;\n  }\n`;\n\nexport const Button = styled.button`\n  background-color: white;\n  border: none;\n  border-radius: 8px;\n  color: #282c34;\n  cursor: pointer;\n  font-size: 16px;\n  margin: 0px 20px;\n  padding: 12px 24px;\n  text-align: center;\n  text-decoration: none;\n`;\n\nexport const Container = styled.div`\n  background-color: #ff5e3a;\n  display: flex;\n  flex-direction: column;\n  height: calc(100vh);\n`;\n\nexport const Header = styled.header`\n  align-items: center;\n  background-color: #282c34;\n  color: white;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  min-height: 70px;\n`;\n\nexport const Image = styled.img`\n  height: 20vmin;\n  margin-bottom: 16px;\n  pointer-events: none;\n`;\n\nexport const Link = styled.a.attrs({\n  target: \"_blank\",\n  rel: \"noopener noreferrer\",\n})`\n  color: #61dafb;\n  margin-top: 8px;\n`;\n","export default __webpack_public_path__ + \"static/media/infura.f17f4efa.png\";","import erc20Abi from \"./abis/erc20.json\";\nimport ownableAbi from \"./abis/ownable.json\";\nimport competitionAbi from \"./abis/competition.json\";\n\nconst abis = {\n  erc20: erc20Abi,\n  ownable: ownableAbi,\n  competition: competitionAbi,\n};\n\nexport default abis;\n","// This address points to a dummy ERC-20 contract. Replace it with your own smart contracts.\nconst addresses = {\n  ceaErc20: \"0xa6dF0C88916f3e2831A329CE46566dDfBe9E74b7\",\n  competition: \"0x5cEA36C6F25Ad0F59d1BA96e4EE8758D92849611\",\n};\nexport default addresses;\n","import { Contract } from \"@ethersproject/contracts\";\nimport { useCall, useCalls } from \"@usedapp/core\";\nimport React, { useEffect, useState } from \"react\";\n\nimport { Body, Container, Image, StyledTable } from \"./components\";\nimport logo from \"./infura.png\";\n\nimport { addresses, abis } from \"@my-app/contracts\";\n\nfunction App() {\n  // Read more about useDapp on https://usedapp.io/\n\n  let { error: isEnabledError, value: isEnabled } =\n    useCall({\n      contract: new Contract(addresses.competition, abis.competition),\n      method: \"isCompetitionEnabled\",\n      args: [],\n    }) ?? {};\n\n  console.log(isEnabled);\n\n  let { error: getParticipantsError, value: participants } =\n    useCall({\n      contract: new Contract(addresses.competition, abis.competition),\n      method: \"getParticipants\",\n      args: [],\n    }) ?? {};\n\n  participants = participants\n    ? participants\n    : [\n        \"0x0000000000000000000000000000000000000000\",\n        \"0x0000000000000000000000000000000000000000\",\n      ];\n\n  const getAddresses = [];\n  for (let i = 0; i < participants.length; i++) {\n    for (let j = 0; j < participants[i].length; j++) {\n      getAddresses.push(participants[i][j]);\n    }\n  }\n\n  // Look up the points for each participant\n  const preparePointsMultiCall = [];\n  const pepareJailMultiCall = [];\n  const pepareNamelMultiCall = [];\n\n  for (let i = 0; i < getAddresses.length; i++) {\n    preparePointsMultiCall.push({\n      contract: new Contract(addresses.competition, abis.competition),\n      method: \"getParticipantPoints\",\n      args: [getAddresses[i]],\n    });\n\n    pepareJailMultiCall.push({\n      contract: new Contract(addresses.competition, abis.competition),\n      method: \"isInJail\",\n      args: [getAddresses[i]],\n    });\n\n    pepareNamelMultiCall.push({\n      contract: new Contract(addresses.competition, abis.competition),\n      method: \"getParticipantName\",\n      args: [getAddresses[i]],\n    });\n  }\n\n  let pointsMultiCall = useCalls(preparePointsMultiCall) ?? {};\n  let jailMultiCall = useCalls(pepareJailMultiCall) ?? {};\n  let nameMultiCall = useCalls(pepareNamelMultiCall) ?? {};\n\n  let collectPoints = [];\n  for (let i = 0; i < pointsMultiCall.length; i++) {\n    if (pointsMultiCall[i] && !pointsMultiCall[i].error) {\n      collectPoints.push(pointsMultiCall[i].value);\n    } else {\n      continue; // Too many errors\n    }\n  }\n\n  let inJail = [];\n  for (let i = 0; i < jailMultiCall.length; i++) {\n    if (jailMultiCall[i] && !jailMultiCall[i].error) {\n      inJail.push(jailMultiCall[i].value);\n    } else {\n      continue; // Too many errors\n    }\n  }\n\n  let names = [];\n  console.log(nameMultiCall);\n  for (let i = 0; i < nameMultiCall.length; i++) {\n    if (nameMultiCall[i] && !nameMultiCall[i].error) {\n      names.push(nameMultiCall[i].value);\n    } else {\n      continue; // Too many errors\n    }\n  }\n\n  const data = [];\n  if (getAddresses.length === collectPoints.length) {\n    for (let i = 0; i < getAddresses.length; i++) {\n      console.log(getAddresses[i], collectPoints[i].toString(), inJail[i]);\n      data.push({\n        address: getAddresses[i],\n        points: collectPoints[i].toString(),\n        jail: inJail[i].toString(),\n        name: names[i],\n      });\n    }\n  }\n\n  let htmlEnabled = \"Game is OFF\";\n\n  if (isEnabled && isEnabled[0] === true) {\n    htmlEnabled = \"Game is ON\";\n  }\n\n  return (\n    <Container>\n      <Body>\n        <h1>\n          <a href=\"https://ropsten.etherscan.io/address/0x5cEA36C6F25Ad0F59d1BA96e4EE8758D92849611\">\n            Game contract\n          </a>\n        </h1>\n        <StyledTable>\n          <tbody>\n            <tr>\n              <th>Competitor</th>\n              <th>Name</th>\n              <th>Jail</th>\n              <th>Points</th>\n            </tr>\n            {data.map((val, key) => {\n              return (\n                <tr key={key}>\n                  <td>{val.address}</td>\n                  <td>{val.name}</td>\n                  <td>{val.jail}</td>\n                  <td>{val.points}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </StyledTable>\n        {htmlEnabled}\n        <Image src={logo} alt=\"ethereum-logo\" />\n      </Body>\n    </Container>\n  );\n}\n\nexport default App;\n","import \"./index.css\";\n\nimport { DAppProvider, Ropsten } from \"@usedapp/core\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { getDefaultProvider } from \"ethers\";\n\nimport App from \"./App\";\n\nconst config = {\n  readOnlyChainId: Ropsten.chainId,\n  readOnlyUrls: {\n    [Ropsten.chainId]: getDefaultProvider(\"ropsten\"),\n  },\n  pollingInterval: 10000,\n};\n\nReactDOM.render(\n  <React.StrictMode>\n    <DAppProvider config={config}>\n      <App />\n    </DAppProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}